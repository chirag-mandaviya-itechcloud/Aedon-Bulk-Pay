<template>
    <lightning-card class="slds-m-around_medium">
        <div class="slds-text-title_bold" slot="title">
            <h1 style="font-size: larger;">Bulk Pay</h1>
        </div>
        <div class="slds-p-around_medium">

            <lightning-spinner if:true={isLoading} alternative-text="Loading" size="medium"></lightning-spinner>

            <!-- Filter Section -->
            <!-- <div class="slds-box slds-m-bottom_medium">
                <div class="slds-grid slds-gutters slds-wrap">
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-5">
                        <lightning-input label="Account" value={filterAccount} data-field="filterAccount"
                            onchange={handleFilterChange}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-5">
                        <lightning-input type="date" label="From Date" value={filterFromDate}
                            data-field="filterFromDate" onchange={handleFilterChange}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-5">
                        <lightning-input type="date" label="To Date" value={filterToDate} data-field="filterToDate"
                            onchange={handleFilterChange}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-5">
                        <lightning-input label="Reference" value={filterReference} data-field="filterReference"
                            onchange={handleFilterChange}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-5">
                        <div class="slds-m-top_large">
                            <lightning-button variant="brand" label="Filter" onclick={handleApplyFilter}>
                            </lightning-button>
                            <lightning-button variant="neutral" label="Clear Filter" onclick={handleApplyClearFilter}
                                class="slds-m-left_large">
                            </lightning-button>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- Invoice Datatable -->
            <div class="slds-m-bottom_medium" style="max-height: 300px; overflow-y: auto;">
                <lightning-datatable key-field="Id" data={invoiceRecords} columns={columns}
                    onrowselection={handleRowSelection} selected-rows={selectedRows}>
                </lightning-datatable>
            </div>
            <!-- Total Amount -->
            <div class="slds-grid slds-grid_align-end slds-p-around_small slds-gutters">
                <div class="slds-text-heading_small" style="font-weight: bold;">
                    Total Amount:
                    <lightning-formatted-number value={totalAmount} style="padding-left: 5px;">
                    </lightning-formatted-number>
                </div>
            </div>

            <!-- Payment Details Section -->
            <div class="slds-m-around_medium">
                <div class="slds-grid slds-gutters slds-wrap">
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <lightning-input type="date" label="Date" value={paymentDate} data-field="paymentDate"
                            placeholder="Select Date" onchange={handlePaymentFieldChange} required>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <lightning-combobox label="Bank Account" value={bankAccount} placeholder="Select Bank Account"
                            options={bankAccountOptions} data-field="bankAccount" onchange={handlePaymentFieldChange}
                            required>
                        </lightning-combobox>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <lightning-input type="number" label="Fx rate" value={exchangeRate} data-field="exchangeRate"
                            placeholder="FX Rate" onchange={handlePaymentFieldChange} formatter="decimal" step="0.0001"
                            required>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <lightning-input label="Reference Pay" value={paymentReference} data-field="paymentReference"
                            placeholder="Reference" onchange={handlePaymentFieldChange} required>
                        </lightning-input>
                    </div>
                </div>

                <!-- Post Button -->
                <div class="slds-m-top_medium slds-text-align_right">
                    <lightning-button variant="neutral" label="Cancel" onclick={handleCancel}
                        class="slds-m-left_x-small">
                    </lightning-button>
                    <lightning-button variant="brand" label="Pay" onclick={handlePay} class="slds-m-left_medium">
                    </lightning-button>
                </div>
            </div>

        </div>
    </lightning-card>
</template>
